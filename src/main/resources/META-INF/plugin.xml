<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.dilika.tailwindsmartplugin</id>
    <icon>tailwind_smart_icon.svg</icon>
    <name>Tailwind CSS Support</name>
    <version>1.2.3</version>
    <vendor url="https://ko-fi.com/dilika">dilika</vendor>
    
    <!-- Compatibility with IntelliJ Platform Products -->
    <idea-version since-build="241" until-build="252.*"/>
    
    <description><![CDATA[
    <h1>ğŸš€ Tailwind CSS Smart Plugin - The Ultimate Tailwind Experience</h1>

    <p><strong>The most comprehensive Tailwind CSS plugin for IntelliJ IDEA. Complete Tailwind v4.1 support, real-time validation, visual preview, and premium icon system.</strong></p>

    <h2>âœ¨ Why Choose This Plugin?</h2>

    <p>Transform your Tailwind CSS development workflow with the most advanced plugin available for IntelliJ-based IDEs. Built with performance and developer experience in mind, this plugin provides everything you need to build beautiful UIs faster and more efficiently.</p>

    <h2>ğŸ¯ Complete Tailwind CSS v4.1 Support</h2>

    <ul>
        <li><strong>10,000+ Classes</strong> - Full coverage of all Tailwind CSS v4.1 utility classes</li>
        <li><strong>25 Complete Categories</strong> - Colors, Layout, Spacing, Typography, Borders, Effects, Transforms, Interactivity, SVG, Accessibility, Filters, Tables, Animations, and more</li>
        <li><strong>14 New Color Palettes</strong> - Support for copper, jungle, sand, chestnut, midnight, aqua, cherry, magenta, moss, sapphire, charcoal, lava, sunset, marine</li>
        <li><strong>Extended Shades</strong> - Support for the new <code>975</code> shade value</li>
        <li><strong>New Utilities</strong> - <code>text-balance</code>, <code>text-pretty</code>, <code>aspect-[*]</code>, <code>scroll-*</code>, <code>touch-*</code>, <code>will-change-*</code>, <code>contain-*</code>, and more</li>
    </ul>

    <h2>ğŸ¨ Premium Icon System</h2>

    <p>Experience the most beautiful and intuitive icon system for Tailwind CSS completion:</p>

    <ul>
        <li><strong>11 Specialized Icon Types</strong> - Each category has its own visual identity:
            <ul>
                <li>ğŸ¨ <strong>Colors</strong> - Real color circles extracted from Tailwind classes</li>
                <li>ğŸ“ <strong>Spacing</strong> - Visual padding/margin indicators</li>
                <li>ğŸ“ <strong>Typography</strong> - Stylized "Aa" icons</li>
                <li>ğŸ“ <strong>Layout</strong> - Grid-based icons</li>
                <li>ğŸ”² <strong>Borders</strong> - Border style indicators</li>
                <li>âœ¨ <strong>Effects</strong> - Shadow/glow effects</li>
                <li>ğŸ”„ <strong>Transforms</strong> - Rotation arrows</li>
                <li>ğŸ‘† <strong>Interactivity</strong> - Cursor icons</li>
                <li>ğŸ¯ <strong>SVG</strong> - Polygon shapes</li>
                <li>â™¿ <strong>Accessibility</strong> - Person icons</li>
                <li>â¬œ <strong>Default</strong> - Rounded squares</li>
            </ul>
        </li>
        <li><strong>Smart Color Extraction</strong> - Automatically extracts and displays actual Tailwind colors (292 color combinations)</li>
        <li><strong>Performance Optimized</strong> - Icon caching for instant display</li>
    </ul>

    <h2>ğŸ” Real-Time Validation & Linting</h2>

    <ul>
        <li><strong>Invalid Class Detection</strong> - Instantly identify non-existent Tailwind classes with precise highlighting</li>
        <li><strong>Conflict Detection</strong> - Detect conflicting classes (e.g., <code>p-4</code> and <code>px-2</code>)</li>
        <li><strong>Variant Validation</strong> - Validate responsive, state, and pseudo-element variants</li>
        <li><strong>Arbitrary Value Validation</strong> - Check syntax for arbitrary values <code>[value]</code></li>
        <li><strong>IntelliJ Inspections</strong> - Native IntelliJ inspections with quick fixes</li>
        <li><strong>Smart Suggestions</strong> - Levenshtein distance-based suggestions for typos</li>
        <li><strong>Quick Fixes</strong> - One-click fixes to replace invalid classes (up to 5 suggestions per class)</li>
    </ul>

    <h2>ğŸ¨ Visual Preview System</h2>

    <ul>
        <li><strong>Real-Time Preview</strong> - See your Tailwind classes rendered instantly in a dedicated tool window</li>
        <li><strong>Image-Based Rendering</strong> - High-quality Graphics2D rendering (no JavaScript required)</li>
        <li><strong>Dark Mode Support</strong> - Toggle dark mode to preview your designs</li>
        <li><strong>Responsive Breakpoints</strong> - Preview at different screen sizes (sm, md, lg, xl, 2xl)</li>
        <li><strong>Component Detection</strong> - Automatically detects button, card, badge, input components</li>
        <li><strong>Live Updates</strong> - Preview updates as you type (with smart debouncing for performance)</li>
    </ul>

    <h2>ğŸ§  Intelligent Code Completion</h2>

    <ul>
        <li><strong>Context-Aware Suggestions</strong> - Suggestions based on element type and context</li>
        <li><strong>Smart Priority System</strong> - Intelligent prioritization based on exact prefix match, popular classes, common colors, and context analysis</li>
        <li><strong>History-Based Learning</strong> - Learns from your usage patterns</li>
        <li><strong>Visual Previews</strong> - See class descriptions in completion dropdown</li>
        <li><strong>Multi-Language Support</strong> - Works seamlessly with HTML, JSX, TSX, Vue, JavaScript, TypeScript</li>
    </ul>

    <h2>ğŸ“š Enhanced Documentation</h2>

    <ul>
        <li><strong>Hover Documentation</strong> - Rich documentation when hovering over classes</li>
        <li><strong>Official Links</strong> - Direct links to Tailwind CSS official documentation</li>
        <li><strong>Interactive Examples</strong> - See examples with visual previews</li>
        <li><strong>Cheat Sheet</strong> - Quick reference for common classes</li>
        <li><strong>CSS Equivalents</strong> - See the actual CSS generated by each class</li>
    </ul>

    <h2>ğŸ”§ Developer Tools</h2>

    <ul>
        <li><strong>Project Configuration Detection</strong> - Automatically detects <code>tailwind.config.js</code></li>
        <li><strong>Custom Classes Support</strong> - Works with your custom Tailwind classes</li>
        <li><strong>JIT Mode Support</strong> - Full support for Tailwind JIT mode</li>
        <li><strong>Class Sorting</strong> - Automatically sort classes in a logical order</li>
        <li><strong>Class Folding</strong> - Collapse/expand Tailwind class lists for better readability</li>
        <li><strong>Performance Optimized</strong> - Caching system for faster suggestions</li>
    </ul>

    <h2>ğŸŒ Supported Languages & Frameworks</h2>

    <p>Enjoy a consistent experience across a wide range of web technologies:</p>

    <ul>
        <li>HTML, XML</li>
        <li>JavaScript (including JSX for React, Qwik, Solid)</li>
        <li>TypeScript (including TSX for React, Qwik, Solid)</li>
        <li>Vue.js (<code>.vue</code> files)</li>
        <li>PHP (including Blade templates)</li>
        <li>Svelte</li>
        <li>Astro</li>
        <li>Other template languages where class attributes are common</li>
    </ul>

    <h2>âŒ¨ï¸ Keyboard Shortcuts</h2>

    <ul>
        <li><strong>Shift+F7:</strong> Sort selected Tailwind classes</li>
        <li><strong>Shift+Alt+F7:</strong> Sort all Tailwind classes in the file</li>
        <li><strong>Shift+F8:</strong> Toggle folding for Tailwind classes at cursor</li>
        <li><strong>Shift+Alt+F8:</strong> Fold all Tailwind classes in the file</li>
        <li><strong>Shift+Ctrl+F8:</strong> Unfold all Tailwind classes in the file</li>
        <li><strong>Alt+Enter:</strong> Quick fixes for invalid classes</li>
    </ul>

    <h2>ğŸ“Š Statistics</h2>

    <ul>
        <li><strong>10,000+</strong> Tailwind classes supported</li>
        <li><strong>25</strong> complete categories</li>
        <li><strong>292</strong> color combinations</li>
        <li><strong>11</strong> specialized icon types</li>
        <li><strong>100%</strong> Tailwind v4.1 coverage</li>
    </ul>

    <h2>ğŸ’¡ Tips & Tricks</h2>

    <ul>
        <li>Use <strong>Alt+Enter</strong> on invalid classes to see quick fixes</li>
        <li>Open <strong>View > Tool Windows > Tailwind Preview</strong> for visual previews</li>
        <li>Enable <strong>dark mode</strong> in preview to test your dark theme designs</li>
        <li>Use <strong>responsive breakpoints</strong> in preview to test mobile designs</li>
        <li>The plugin <strong>learns</strong> from your usage - the more you use it, the smarter it gets!</li>
    </ul>

    <h2>ğŸ™ Support the Project</h2>

    <p>If this plugin accelerates your workflow, consider fueling its continued development with a donation on <a href="https://ko-fi.com/dilika" target="_blank" rel="noopener">Ko-fi</a>. Every contributionâ€”small or largeâ€”directly funds new features, refinements, and long-term maintenance. Thank you for keeping the innovation alive!</p>

    <p><strong>Made with â¤ï¸ for the Tailwind CSS community</strong></p>
    ]]></description>
    
    <change-notes><![CDATA[
    <h2>Version 1.2.3 - November 2024</h2>
    
    <h3>ğŸ‰ Major Release - Complete Tailwind v4.1 Support & Premium Features</h3>
    
    <h4>âœ¨ Complete Tailwind CSS v4.1 Support</h4>
    <ul>
        <li>âœ… <strong>10,000+ classes</strong> now supported with full v4.1 coverage</li>
        <li>âœ… <strong>14 new color palettes</strong>: copper, jungle, sand, chestnut, midnight, aqua, cherry, magenta, moss, sapphire, charcoal, lava, sunset, marine</li>
        <li>âœ… <strong>New utilities</strong>: <code>text-balance</code>, <code>text-pretty</code>, <code>aspect-[*]</code>, <code>scroll-*</code>, <code>touch-*</code>, <code>will-change-*</code>, <code>contain-*</code></li>
        <li>âœ… <strong>Extended shades</strong>: Support for the new <code>975</code> shade value</li>
        <li>âœ… <strong>25 complete categories</strong>: Colors, Layout, Spacing, Typography, Borders, Effects, Transforms, Interactivity, SVG, Accessibility, Filters, Tables, Animations, and more</li>
    </ul>

    <h4>ğŸ¨ Premium Icon System</h4>
    <ul>
        <li>âœ… <strong>Complete redesign</strong> with 11 specialized icon types</li>
        <li>âœ… <strong>Real color extraction</strong> from Tailwind classes (292 color combinations)</li>
        <li>âœ… <strong>Visual categories</strong>: Colors, Spacing, Typography, Layout, Borders, Effects, Transforms, Interactivity, SVG, Accessibility</li>
        <li>âœ… <strong>Performance optimized</strong> with intelligent caching</li>
    </ul>

    <h4>ğŸ” Enhanced Validation</h4>
    <ul>
        <li>âœ… <strong>More accurate</strong> invalid class detection</li>
        <li>âœ… <strong>Better conflict detection</strong> (e.g., <code>p-4</code> and <code>px-2</code>)</li>
        <li>âœ… <strong>Improved quick fixes</strong> with up to 5 suggestions per class</li>
        <li>âœ… <strong>Better error messages</strong> with precise highlighting</li>
        <li>âœ… <strong>Fixed TextRange errors</strong> in inspections</li>
    </ul>

    <h4>ğŸ¨ Fixed Preview System</h4>
    <ul>
        <li>âœ… <strong>Fixed</strong>: Preview now works reliably with image-based rendering</li>
        <li>âœ… <strong>Dark mode support</strong> with toggle</li>
        <li>âœ… <strong>Responsive breakpoints</strong> preview (sm, md, lg, xl, 2xl)</li>
        <li>âœ… <strong>Component detection</strong> for better previews</li>
        <li>âœ… <strong>Performance optimized</strong> with smart debouncing</li>
    </ul>

    <h4>ğŸ§  Improved Completion</h4>
    <ul>
        <li>âœ… <strong>Smart priority system</strong> for better suggestions</li>
        <li>âœ… <strong>History-based learning</strong> from your usage patterns</li>
        <li>âœ… <strong>Context-aware suggestions</strong> based on element type</li>
        <li>âœ… <strong>Visual previews</strong> in completion dropdown</li>
    </ul>

    <h4>ğŸ› Bug Fixes</h4>
    <ul>
        <li>âœ… Fixed <strong>100+ completion errors</strong></li>
        <li>âœ… Fixed preview not working</li>
        <li>âœ… Fixed TextRange errors in inspections</li>
        <li>âœ… Fixed shortName duplication errors</li>
        <li>âœ… Fixed color extraction for classes like <code>text-amber-400</code></li>
        <li>âœ… Improved error handling throughout</li>
        <li>âœ… Better fallback mechanisms</li>
        <li>âœ… More stable performance</li>
    </ul>

    <h4>ğŸ”§ Technical Improvements</h4>
    <ul>
        <li>âœ… Icon caching system</li>
        <li>âœ… Validation result caching</li>
        <li>âœ… Optimized class generation</li>
        <li>âœ… Better memory management</li>
        <li>âœ… Improved code organization</li>
    </ul>

    <p><strong>Upgrade now to get the best Tailwind CSS experience in IntelliJ IDEA!</strong></p>
    ]]></change-notes>

    <!-- Product and plugin compatibility requirements -->
    <buyUrl>https://ko-fi.com/dilika</buyUrl>
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>

    <!-- Extension points defined by the plugin -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Services -->
        <projectService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.services.TailwindConfigService"/>
        <projectService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.services.TailwindConfigAnalyzer"/>
        <projectService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.jit.TailwindJitSupport"/>
        <projectService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.context.TailwindContextualSuggestions"/>
        <projectService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.context.ClassHistoryService"/>
        <projectService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.validation.TailwindValidationService"/>
        <projectService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.performance.TailwindCacheService"/>
        <projectService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.refactoring.TailwindRefactoringService"/>
        <applicationService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.settings.TailwindPluginSettings"/>
        
        <!-- Settings UI -->
        <applicationConfigurable parentId="tools"
                instance="com.github.dilika.tailwindsmartplugin.settings.TailwindSettingsConfigurable"
                id="com.github.dilika.tailwindsmartplugin.settings.TailwindSettingsConfigurable"
                displayName="Tailwind CSS Smart Plugin"/>
        
        <!-- Register our action registrar service - commented out as the class does not exist -->
        <!-- 
        <applicationService
                serviceImplementation="com.github.dilika.tailwindsmartplugin.actions.FoldTailwindClassesActionRegistrar"/>
        -->
        
        <!-- Auto-completion for Tailwind CSS classes -->
        <completion.contributor
                language="any"
                implementationClass="com.github.dilika.tailwindsmartplugin.completion.TailwindCompletionContributor"/>
                
        <!-- Documentation Provider for Tailwind CSS classes -->
        <lang.documentationProvider
                language="any"
                order="first"
                implementationClass="com.github.dilika.tailwindsmartplugin.documentation.TailwindDocumentationProvider"/>
                
        <!-- Register for specific file types to ensure we catch all relevant elements -->
        <lang.documentationProvider
                language="HTML"
                order="first"
                implementationClass="com.github.dilika.tailwindsmartplugin.documentation.TailwindDocumentationProvider"/>
                
        <lang.documentationProvider
                language="JavaScript"
                order="first"
                implementationClass="com.github.dilika.tailwindsmartplugin.documentation.TailwindDocumentationProvider"/>
                
        <lang.documentationProvider
                language="TypeScript"
                order="first"
                implementationClass="com.github.dilika.tailwindsmartplugin.documentation.TailwindDocumentationProvider"/>
                
        <lang.documentationProvider
                language="JSX"
                order="first"
                implementationClass="com.github.dilika.tailwindsmartplugin.documentation.TailwindDocumentationProvider"/>
                
        <lang.documentationProvider
                language="TSX"
                order="first"
                implementationClass="com.github.dilika.tailwindsmartplugin.documentation.TailwindDocumentationProvider"/>
                
        <!-- Project startup activity -->
        <postStartupActivity
                implementation="com.github.dilika.tailwindsmartplugin.startup.TailwindStartupActivity"/>
        
        <!-- Register keyboard shortcuts startup activity -->
        <postStartupActivity
                implementation="com.github.dilika.tailwindsmartplugin.startup.TailwindKeyboardShortcutRegistrar"/>
                
        <!-- Folding pour les attributs Tailwind CSS class/className -->
        <lang.foldingBuilder 
                language="XML"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="JavaScript"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="TypeScript"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="JSX Harmony"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="TypeScript JSX"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="HTML"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="Vue"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="Svelte"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="Blade"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <lang.foldingBuilder 
                language="PHP"
                implementationClass="com.github.dilika.tailwindsmartplugin.folding.TailwindClassFoldingBuilder"/>
        <!-- Standalone folding service -->
        <applicationService 
                serviceImplementation="com.github.dilika.tailwindsmartplugin.folding.TailwindFoldingService"/>
        
        <!-- Click listener extension -->
        <editorFactoryListener implementation="com.github.dilika.tailwindsmartplugin.listeners.TailwindFoldingClickListener"/>
        
        <!-- Tool Window for Tailwind Preview -->
        <toolWindow id="Tailwind Preview" 
                    secondary="false" 
                    anchor="right" 
                    factoryClass="com.github.dilika.tailwindsmartplugin.preview.TailwindPreviewToolWindowFactory"
                    icon="AllIcons.General.Information"/>
        
        <!-- Inspections for Tailwind CSS validation -->
        <!-- Single declaration works for all languages that support XML attributes (HTML, JSX, TSX, Vue) -->
        <localInspection 
                shortName="TailwindInvalidClass"
                displayName="Invalid Tailwind CSS class"
                groupName="Tailwind CSS"
                enabledByDefault="true"
                implementationClass="com.github.dilika.tailwindsmartplugin.inspection.TailwindInvalidClassInspection"/>
        
        <!-- Inspection for Tailwind class conflicts -->
        <localInspection 
                shortName="TailwindClassConflict"
                displayName="Tailwind CSS class conflicts"
                groupName="Tailwind CSS"
                enabledByDefault="true"
                implementationClass="com.github.dilika.tailwindsmartplugin.inspection.TailwindClassConflictInspection"/>
    </extensions>

    <!-- Remove the problematic application listener -->
    <!-- 
    <applicationListeners>
        <listener class="com.github.dilika.tailwindsmartplugin.listeners.TailwindProjectListener"
                  topic="com.intellij.openapi.project.ProjectManagerListener"/>
    </applicationListeners>
    -->

    <actions>
        <!-- Group for all Tailwind actions -->
        <group id="TailwindPlugin.Group" text="Tailwind CSS" description="Tailwind CSS tools and utilities" popup="true" icon="/icons/tailwind.svg">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <add-to-group group-id="CodeMenu" anchor="last"/>
            <add-to-group group-id="MainMenu" anchor="last"/>
            <add-to-group group-id="GenerateGroup" anchor="last"/>
            <add-to-group group-id="EditorTabPopupMenu" anchor="last"/>
        </group>
        
        <!-- Individual Class Sorting Action -->
        <action id="TailwindPlugin.Sort"
                class="com.github.dilika.tailwindsmartplugin.actions.SortTailwindClassesAction"
                text="Sort Selected Tailwind Classes"
                description="Sort Tailwind CSS classes at the cursor position or in the current selection."
                icon="/icons/tailwind.svg">
            <add-to-group group-id="TailwindPlugin.Group" anchor="first"/>
            <keyboard-shortcut keymap="$default" first-keystroke="shift F7"/>
        </action>
        
        <!-- Sort All Classes in File -->
        <action id="TailwindPlugin.SortAllClasses"
                class="com.github.dilika.tailwindsmartplugin.actions.SortAllTailwindClassesAction"
                text="Sort All Tailwind Classes in File"
                description="Find and sort all Tailwind CSS classes throughout the entire file."
                icon="/icons/tailwind.svg">
            <add-to-group group-id="TailwindPlugin.Group" anchor="after" relative-to-action="TailwindPlugin.Sort"/>
            <keyboard-shortcut keymap="$default" first-keystroke="shift alt F7"/>
        </action>
        
        <!-- Individual Class Folding Action -->
        <action id="TailwindPlugin.Fold"
                class="com.github.dilika.tailwindsmartplugin.actions.SimpleFoldAction"
                text="Toggle Tailwind Class Folding"
                description="Toggle folding for Tailwind CSS classes at the cursor position">
            <add-to-group group-id="TailwindPlugin.Group" anchor="after" relative-to-action="TailwindPlugin.SortAllClasses"/>
            <add-to-group group-id="FoldingGroup" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="shift F8"/>
        </action>
        
        <!-- Fold All Classes in File -->
        <action id="TailwindPlugin.FoldAll"
                class="com.github.dilika.tailwindsmartplugin.actions.FoldAllTailwindClassesAction"
                text="Fold All Tailwind Classes in File"
                description="Find and fold all Tailwind CSS classes throughout the entire file.">
            <add-to-group group-id="TailwindPlugin.Group" anchor="after" relative-to-action="TailwindPlugin.Fold"/>
            <add-to-group group-id="FoldingGroup" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="shift alt F8"/>
        </action>
        
        <!-- Unfold All Classes in File -->
        <action id="TailwindPlugin.UnfoldAll"
                class="com.github.dilika.tailwindsmartplugin.actions.UnfoldAllTailwindClassesAction"
                text="Unfold All Tailwind Classes in File"
                description="Find and unfold all Tailwind CSS classes throughout the entire file.">
            <add-to-group group-id="TailwindPlugin.Group" anchor="after" relative-to-action="TailwindPlugin.FoldAll"/>
            <add-to-group group-id="FoldingGroup" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl F8"/>
        </action>
        
        <!-- End of Tailwind actions -->
    </actions>
</idea-plugin>
